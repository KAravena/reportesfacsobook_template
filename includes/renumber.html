<script>
document.addEventListener('DOMContentLoaded', () => {
  const adjust = (value) => {
    const num = parseInt(value, 10);
    if (Number.isNaN(num) || num <= 0) {
      return null;
    }
    const adjusted = num - 1;
    return adjusted > 0 ? String(adjusted) : '1';
  };

  document.querySelectorAll('.chapter-number').forEach((el) => {
    const updated = adjust(el.textContent.trim());
    if (updated !== null) {
      el.textContent = updated;
    }
  });

  document.querySelectorAll('[data-number]').forEach((el) => {
    const updated = adjust(el.getAttribute('data-number'));
    if (updated !== null) {
      el.setAttribute('data-number', updated);
    }
  });

  const titleMatch = document.title.match(/^\s*(\d+)\s+(.*)$/);
  if (titleMatch) {
    const updated = adjust(titleMatch[1]);
    if (updated !== null) {
      document.title = `${updated} ${titleMatch[2]}`;
    }
  }
});
</script>
