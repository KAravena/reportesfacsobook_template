<script>
document.addEventListener('DOMContentLoaded', () => {
  const chapterNumbers = document.querySelectorAll('.sidebar .chapter-number');
  chapterNumbers.forEach((el, idx) => {
    if (idx === 0) {
      const sibling = el.nextSibling;
      el.textContent = '';
      el.style.display = 'none';
      if (sibling && sibling.nodeType === Node.TEXT_NODE) {
        sibling.remove();
      }
    } else {
      el.textContent = String(idx);
    }
  });

  document.querySelectorAll('[data-number]').forEach((el) => {
    const link = el.closest('a');
    const href = (link && link.getAttribute('href')) || el.getAttribute('href');
    if (href && href.includes('index.html')) {
      el.setAttribute('data-number', '');
      return;
    }
    const current = el.getAttribute('data-number');
    if (!current) {
      return;
    }
    const num = parseInt(current, 10);
    if (!Number.isNaN(num) && num > 0) {
      el.setAttribute('data-number', String(num - 1));
    }
  });
});
</script>
